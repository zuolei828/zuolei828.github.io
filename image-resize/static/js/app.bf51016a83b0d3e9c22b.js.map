{"version":3,"sources":["webpack:///static/js/app.bf51016a83b0d3e9c22b.js","webpack:///./image_resize_src/src/router/index.js","webpack:///./image_resize_src/src/utils/resize.js","webpack:///./image_resize_src/src/pages/index.vue?8577","webpack:///./image_resize_src/src/main.js","webpack:///index.vue","webpack:///./image_resize_src/src/pages/index.vue?ca68"],"names":["webpackJsonp","15","module","exports","37","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","use","router","base","scrollBehavior","to","from","savedPosition","x","y","routes","path","redirect","name","component","resolve","e","then","__WEBPACK_AMD_REQUIRE_ARRAY__","apply","bind","this","catch","oe","meta","title","38","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","n","install","Vue","resizeSupported","canvas","document","createElement","getContext","window","Blob","atob","dataUrl","file","a","reject","type","indexOf","Error","fileReader","FileReader","onload","target","result","onerror","readAsDataURL","getImageDimensions","url","img","Image","src","width","height","calculateAspectRatioFit","srcWidth","srcHeight","maxWidth","maxHeight","centerCrop","ratio","Math","max","min","marginX","marginY","resizeDataUrl","_ref","quality","canvasElement","imageElement","setAttribute","body","appendChild","imgWidth","imgHeight","parentNode","removeChild","parseInt","parseFloat","dimensions","drawImage","toDataURL","dataUrltoBlob","dataurl","origSize","arr","split","mime","match","bstr","length","u8arr","Uint8Array","charCodeAt","blob","resizeImage","options","rUrl","size","prototype","$resizeSupported","$dataUrl","$imgDimension","$resizeDataUrl","$dataUrlToBlob","$resizeImage","40","injectStyle","ssrContext","Component","42","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_element_ui_lib_theme_default_index_css__","__WEBPACK_IMPORTED_MODULE_1_element_ui_lib__","__WEBPACK_IMPORTED_MODULE_1_element_ui_lib___default","__WEBPACK_IMPORTED_MODULE_2_vue__","__WEBPACK_IMPORTED_MODULE_3__pages___","__WEBPACK_IMPORTED_MODULE_3__pages____default","__WEBPACK_IMPORTED_MODULE_4__router__","__WEBPACK_IMPORTED_MODULE_5__utils_resize__","config","productionTip","el","template","components","App","43","data","created","mounted","watch","updated","methods","79","80","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","default-active","theme","index","_v","staticRenderFns"],"mappings":"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","file":"static/js/app.bf51016a83b0d3e9c22b.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 15:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 37:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(81);\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* eslint-disable global-require, import/no-dynamic-require */\nvar router = new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  base: '/image-resize',\n  scrollBehavior: function scrollBehavior(to, from, savedPosition) {\n    return { x: 0, y: 0 };\n  },\n\n  routes: [{\n    path: '/',\n    redirect: '/resize-demo'\n  }, {\n    path: '/resize-demo',\n    name: 'resizeDemo',\n    component: function component(resolve) {\n      return __webpack_require__.e/* require */(0).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(85)]; (resolve.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}.bind(this)).catch(__webpack_require__.oe);\n    },\n    meta: {\n      title: 'demo'\n    }\n  }]\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (router);\n\n/***/ }),\n\n/***/ 38:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  install: function install(Vue) {\n    var resizeSupported = function resizeSupported() {\n      var canvas = document.createElement('canvas');\n      return canvas.getContext && canvas.getContext('2d') && window.Blob && window.atob;\n    };\n\n    var dataUrl = function dataUrl(file) {\n      return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        if (file.type.indexOf('image') !== 0) {\n          reject(new Error('图片格式非法'));\n        }\n        var fileReader = new FileReader();\n        fileReader.onload = function (e) {\n          resolve(e.target.result);\n        };\n        fileReader.onerror = function () {\n          reject(new Error('图片读取失败'));\n        };\n        fileReader.readAsDataURL(file);\n      });\n    };\n\n    var getImageDimensions = function getImageDimensions(file) {\n      return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        dataUrl(file).then(function (url) {\n          var img = new Image();\n          img.src = url;\n          img.onload = function () {\n            resolve({\n              width: img.width,\n              height: img.height\n            });\n          };\n          img.onerror = function () {\n            reject(new Error('图片读取失败'));\n          };\n        });\n      });\n    };\n\n    var calculateAspectRatioFit = function calculateAspectRatioFit(srcWidth, srcHeight, maxWidth, maxHeight, centerCrop) {\n      var ratio = centerCrop ? Math.max(maxWidth / srcWidth, maxHeight / srcHeight) : Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n      return {\n        width: srcWidth * ratio,\n        height: srcHeight * ratio,\n        marginX: srcWidth * ratio - maxWidth,\n        marginY: srcHeight * ratio - maxHeight\n      };\n    };\n\n    var resizeDataUrl = function resizeDataUrl(_ref) {\n      var url = _ref.url,\n          width = _ref.width,\n          height = _ref.height,\n          quality = _ref.quality,\n          type = _ref.type,\n          ratio = _ref.ratio,\n          centerCrop = _ref.centerCrop;\n\n      return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        var canvasElement = document.createElement('canvas');\n        var imageElement = document.createElement('img');\n        imageElement.setAttribute('style', 'visibility:hidden;position:fixed;z-index:-100000');\n        document.body.appendChild(imageElement);\n        imageElement.onload = function () {\n          var imgWidth = imageElement.width;\n          var imgHeight = imageElement.height;\n          imageElement.parentNode.removeChild(imageElement);\n          try {\n            width && (width = parseInt(width));\n            height && (height = parseInt(height));\n            if (ratio) {\n              ratio = parseFloat(ratio);\n              var imgRatio = imgWidth / imgHeight;\n              if (imgRatio < ratio) {\n                width = imgWidth;\n                height = width / ratio;\n              } else {\n                height = imgHeight;\n                width = height * ratio;\n              }\n            }\n            !width && (width = imgWidth);\n            !height && (height = imgHeight);\n            quality && (quality = parseFloat(quality));\n            var dimensions = calculateAspectRatioFit(imgWidth, imgHeight, width, height, centerCrop);\n            if (Math.min(dimensions.width, width) < 1 || Math.min(dimensions.height, height) < 1) {\n              reject(new Error('目标图片width或height过小'));\n            }\n            canvasElement.width = Math.min(dimensions.width, width);\n            canvasElement.height = Math.min(dimensions.height, height);\n            var context = canvasElement.getContext('2d');\n            context.drawImage(imageElement, Math.min(0, -dimensions.marginX / 2), Math.min(0, -dimensions.marginY / 2), dimensions.width, dimensions.height);\n            resolve(canvasElement.toDataURL(type || 'image/jpeg', quality || 0.934));\n          } catch (e) {\n            reject(new Error('图片压缩失败'));\n          }\n        };\n        imageElement.src = url;\n      });\n    };\n\n    var dataUrltoBlob = function dataUrltoBlob(dataurl, name, origSize) {\n      return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        var arr = dataurl.split(',');\n        var mime = arr[0].match(/:(.*?);/)[1];\n        var bstr = atob(arr[1]);\n        var n = bstr.length;\n        var u8arr = new Uint8Array(n);\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n);\n        }\n        try {\n          var blob = new window.Blob([u8arr], { type: mime });\n          blob.name = name;\n          resolve({\n            blob: blob,\n            dataurl: dataurl\n          });\n        } catch (e) {\n          reject(new Error('图片atob失败'));\n        }\n      });\n    };\n\n    var resizeImage = function resizeImage(file, options) {\n      return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        if (file.type.indexOf('image') !== 0) reject(new Error('图片格式非法'));\n        dataUrl(file).then(function (url) {\n          if (!options) {\n            options = {};\n          }\n          options.url = url;\n          resizeDataUrl(options).then(function (rUrl) {\n            dataUrltoBlob(rUrl, file.name, file.size).then(function (result) {\n              resolve(result);\n            }).catch(function (e) {\n              reject(e);\n            });\n          }).catch(function (e) {\n            reject(e);\n          });\n        }).catch(function (e) {\n          reject(e);\n        });\n      });\n    };\n    Vue.prototype.$resizeSupported = resizeSupported;\n    Vue.$resizeSupported = resizeSupported;\n\n    Vue.prototype.$dataUrl = dataUrl;\n    Vue.$dataUrl = dataUrl;\n\n    Vue.prototype.$imgDimension = getImageDimensions;\n    Vue.$imgDimension = getImageDimensions;\n\n    Vue.prototype.$resizeDataUrl = resizeDataUrl;\n    Vue.$resizeDataUrl = resizeDataUrl;\n\n    Vue.prototype.$dataUrlToBlob = dataUrltoBlob;\n    Vue.$dataUrlToBlob = dataUrltoBlob;\n\n    Vue.prototype.$resizeImage = resizeImage;\n    Vue.$resizeImage = resizeImage;\n  }\n});\n\n/***/ }),\n\n/***/ 40:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(79)\n}\nvar Component = __webpack_require__(41)(\n  /* script */\n  __webpack_require__(43),\n  /* template */\n  __webpack_require__(80),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 42:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_element_ui_lib_theme_default_index_css__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_element_ui_lib_theme_default_index_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_element_ui_lib_theme_default_index_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_element_ui_lib__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_element_ui_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_element_ui_lib__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pages___ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pages____default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__pages___);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__router__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_resize__ = __webpack_require__(38);\n\n\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1_element_ui_lib___default.a);\n__WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_5__utils_resize__[\"a\" /* default */]);\n\n__WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_4__router__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_3__pages____default.a }\n});\n\n/***/ }),\n\n/***/ 43:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'app',\n  data: function data() {\n    return {};\n  },\n  created: function created() {},\n  mounted: function mounted() {},\n\n  watch: {},\n  updated: function updated() {},\n\n  methods: {}\n});\n\n/***/ }),\n\n/***/ 79:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 80:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('div', {\n    staticClass: \"left-menu\"\n  }, [_c('el-menu', {\n    staticClass: \"el-menu-vertical-demo\",\n    attrs: {\n      \"default-active\": \"/resize-demo\",\n      \"theme\": \"dark\",\n      \"router\": true\n    }\n  }, [_c('el-menu-item', {\n    attrs: {\n      \"index\": \"/resize-demo\"\n    }\n  }, [_vm._v(\"demo\")]), _vm._v(\" \"), _c('el-menu-item', {\n    attrs: {\n      \"index\": \"/api\"\n    }\n  }, [_vm._v(\"API\")])], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"content\"\n  }, [_c('router-view')], 1)])\n},staticRenderFns: []}\n\n/***/ })\n\n},[42]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.bf51016a83b0d3e9c22b.js","import Vue from 'vue';\nimport VueRouter from 'vue-router';\n\nVue.use(VueRouter);\n\n/* eslint-disable global-require, import/no-dynamic-require */\nconst router = new VueRouter({\n  base: '/image-resize',\n  scrollBehavior(to, from, savedPosition) {\n    return { x: 0, y: 0 };\n  },\n  routes: [\n    {\n      path: '/',\n      redirect: '/resize-demo',\n    },\n    {\n      path: '/resize-demo',\n      name: 'resizeDemo',\n      component: resolve => require(['../pages/content/demo'], resolve),\n      meta: {\n        title: 'demo',\n      },\n    },\n  ],\n});\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./image_resize_src/src/router/index.js","export default {\n  install (Vue) {\n    let resizeSupported = () => {\n      let canvas = document.createElement('canvas')\n      return canvas.getContext && canvas.getContext('2d') && window.Blob && window.atob\n    }\n\n    let dataUrl = (file) => {\n      return new Promise((resolve, reject) => {\n        if (file.type.indexOf('image') !== 0) {\n          reject(new Error('图片格式非法'))\n        }\n        let fileReader = new FileReader()\n        fileReader.onload = function (e) {\n          resolve(e.target.result)\n        }\n        fileReader.onerror = function () {\n          reject(new Error('图片读取失败'))\n        }\n        fileReader.readAsDataURL(file)\n      })\n    }\n\n    let getImageDimensions = (file) => {\n      return new Promise((resolve, reject) => {\n        dataUrl(file).then((url) => {\n          let img = new Image()\n          img.src = url\n          img.onload = () => {\n            resolve({\n              width: img.width,\n              height: img.height\n            })\n          }\n          img.onerror = () => {\n            reject(new Error('图片读取失败'))\n          }\n        })\n      })\n    }\n\n    let calculateAspectRatioFit = (srcWidth, srcHeight, maxWidth, maxHeight, centerCrop) => {\n      let ratio = centerCrop ? Math.max(maxWidth / srcWidth, maxHeight / srcHeight) : Math.min(maxWidth / srcWidth, maxHeight / srcHeight)\n      return {\n        width: srcWidth * ratio,\n        height: srcHeight * ratio,\n        marginX: srcWidth * ratio - maxWidth,\n        marginY: srcHeight * ratio - maxHeight\n      }\n    }\n\n    let resizeDataUrl = ({url, width, height, quality, type, ratio, centerCrop}) => {\n      return new Promise((resolve, reject) => {\n        let canvasElement = document.createElement('canvas')\n        let imageElement = document.createElement('img')\n        imageElement.setAttribute('style', 'visibility:hidden;position:fixed;z-index:-100000')\n        document.body.appendChild(imageElement)\n        imageElement.onload = () => {\n          let imgWidth = imageElement.width\n          let imgHeight = imageElement.height\n          imageElement.parentNode.removeChild(imageElement)\n          try {\n            width && (width = parseInt(width))\n            height && (height = parseInt(height))\n            if (ratio) {\n              ratio = parseFloat(ratio)\n              let imgRatio = imgWidth / imgHeight\n              if (imgRatio < ratio) {\n                width = imgWidth\n                height = width / ratio\n              } else {\n                height = imgHeight\n                width = height * ratio\n              }\n            }\n            !width && (width = imgWidth)\n            !height && (height = imgHeight)\n            quality && (quality = parseFloat(quality))\n            let dimensions = calculateAspectRatioFit(imgWidth, imgHeight, width, height, centerCrop)\n            if (Math.min(dimensions.width, width) < 1 || Math.min(dimensions.height, height) < 1) {\n              reject(new Error('目标图片width或height过小'))\n            }\n            canvasElement.width = Math.min(dimensions.width, width)\n            canvasElement.height = Math.min(dimensions.height, height)\n            let context = canvasElement.getContext('2d')\n            context.drawImage(imageElement,\n              Math.min(0, -dimensions.marginX / 2), Math.min(0, -dimensions.marginY / 2),\n              dimensions.width, dimensions.height)\n            resolve(canvasElement.toDataURL(type || 'image/jpeg', quality || 0.934))\n          } catch (e) {\n            reject(new Error('图片压缩失败'))\n          }\n        }\n        imageElement.src = url\n      })\n    }\n\n    let dataUrltoBlob = (dataurl, name, origSize) => {\n      return new Promise((resolve, reject) => {\n        let arr = dataurl.split(',')\n        let mime = arr[0].match(/:(.*?);/)[1]\n        let bstr = atob(arr[1])\n        let n = bstr.length\n        let u8arr = new Uint8Array(n)\n        while (n--) {\n          u8arr[n] = bstr.charCodeAt(n)\n        }\n        try {\n          let blob = new window.Blob([u8arr], {type: mime})\n          blob.name = name\n          resolve({\n            blob: blob,\n            dataurl: dataurl\n          })\n        } catch (e) {\n          reject(new Error('图片atob失败'))\n        }\n      })\n    }\n\n    let resizeImage = (file, options) => {\n      return new Promise((resolve, reject) => {\n        if (file.type.indexOf('image') !== 0) reject(new Error('图片格式非法'))\n        dataUrl(file).then((url) => {\n          if (!options) {\n            options = {}\n          }\n          options.url = url\n          resizeDataUrl(options).then((rUrl) => {\n            dataUrltoBlob(rUrl, file.name, file.size).then((result) => {\n              resolve(result)\n            }).catch((e) => {\n              reject(e)\n            })\n          }).catch((e) => {\n            reject(e)\n          })\n        }).catch((e) => {\n          reject(e)\n        })\n      })\n    }\n    Vue.prototype.$resizeSupported = resizeSupported\n    Vue.$resizeSupported = resizeSupported\n\n    Vue.prototype.$dataUrl = dataUrl\n    Vue.$dataUrl = dataUrl\n\n    Vue.prototype.$imgDimension = getImageDimensions\n    Vue.$imgDimension = getImageDimensions\n\n    Vue.prototype.$resizeDataUrl = resizeDataUrl\n    Vue.$resizeDataUrl = resizeDataUrl\n\n    Vue.prototype.$dataUrlToBlob = dataUrltoBlob\n    Vue.$dataUrlToBlob = dataUrltoBlob\n\n    Vue.prototype.$resizeImage = resizeImage\n    Vue.$resizeImage = resizeImage\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./image_resize_src/src/utils/resize.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"importLoaders\\\":1}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e3ab60fc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!sass-resources-loader?{\\\"resources\\\":\\\"/Users/raistlinzuo/zuolei828.github.io/image_resize_src/src/sass/_mixins.scss\\\"}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e3ab60fc\\\",\\\"hasScoped\\\":false}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./image_resize_src/src/pages/index.vue\n// module id = 40\n// module chunks = 2","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport EUI from 'element-ui';\nimport 'element-ui/lib/theme-default/index.css';\n\nimport App from './pages/';\nimport router from './router';\nimport resize from './utils/resize';\n\nVue.use(EUI);\nVue.use(resize);\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App },\n});\n\n\n// WEBPACK FOOTER //\n// ./image_resize_src/src/main.js","<template>\n  <div id=\"app\">\n    <div class=\"left-menu\">\n      <el-menu default-active=\"/resize-demo\" class=\"el-menu-vertical-demo\" theme=\"dark\" :router=\"true\">\n        <el-menu-item index=\"/resize-demo\">demo</el-menu-item>\n        <el-menu-item index=\"/api\">API</el-menu-item>\n      </el-menu>\n    </div>\n    <div class=\"content\">\n      <router-view>\n      </router-view>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'app',\n  data() {\n    return {\n    };\n  },\n  created() {\n  },\n  mounted() {\n\n  },\n  watch: {\n  },\n  updated() {\n\n  },\n  methods: {\n  },\n};\n</script>\n<style lang=\"scss\">\n  html, body {\n    height: 100%;\n  }\n  #app {\n    position: relative;\n    min-height: 100%;\n    .left-menu {\n      width: 200px;\n      position: absolute;\n      left: 0px;\n      top: 0px;\n      bottom: 0px;\n      background-color: #324157;\n    }\n    .content {\n      margin-left: 200px;\n      padding: 20px;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// index.vue?7bd9484a","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('div', {\n    staticClass: \"left-menu\"\n  }, [_c('el-menu', {\n    staticClass: \"el-menu-vertical-demo\",\n    attrs: {\n      \"default-active\": \"/resize-demo\",\n      \"theme\": \"dark\",\n      \"router\": true\n    }\n  }, [_c('el-menu-item', {\n    attrs: {\n      \"index\": \"/resize-demo\"\n    }\n  }, [_vm._v(\"demo\")]), _vm._v(\" \"), _c('el-menu-item', {\n    attrs: {\n      \"index\": \"/api\"\n    }\n  }, [_vm._v(\"API\")])], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"content\"\n  }, [_c('router-view')], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-e3ab60fc\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./image_resize_src/src/pages/index.vue\n// module id = 80\n// module chunks = 2"],"sourceRoot":""}